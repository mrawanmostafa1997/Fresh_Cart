<!-- orders.html -->
<section class="m-5">
  <div class="space-y-4">
    @for (order of orderList; track order._id) {
    <article class="rounded-2xl border shadow-sm p-4 bg-white">
      <!-- Header -->
      <div class="flex flex-wrap items-start justify-between gap-3">
        <div>
          <h3 class="text-base font-semibold">
            Order #{{ order._id }}
            <span class="text-gray-500 text-sm"> · {{ order.createdAt }} </span>
          </h3>
          <p class="text-sm text-gray-600">
            {{ order.user.name }} · {{ order.user.email }}
            <span *ngIf="order.user.phone"> · {{ order.user.phone }}</span>
          </p>
        </div>

        <div class="flex items-center gap-2">
          <span
            class="px-2 py-0.5 rounded-full text-xs"
            [class.bg-green-100]="order.isPaid"
            [class.text-green-700]="order.isPaid"
            [class.bg-yellow-100]="!order.isPaid"
            [class.text-yellow-700]="!order.isPaid"
          >
            {{ order.isPaid ? "Paid" : "Unpaid" }}
          </span>
          <span
            class="px-2 py-0.5 rounded-full text-xs"
            [class.bg-blue-100]="order.isDelivered"
            [class.text-blue-700]="order.isDelivered"
            [class.bg-gray-100]="!order.isDelivered"
            [class.text-gray-700]="!order.isDelivered"
          >
            {{ order.isDelivered ? "Delivered" : "Not Delivered" }}
          </span>
          <span
            class="px-2 py-0.5 rounded-full text-xs bg-purple-100 text-purple-700"
          >
            {{ order.paymentMethodType }}
          </span>
        </div>
      </div>

      <!-- Items summary -->
      <div class="mt-3 text-sm text-gray-700">
        Items:
        <span class="font-medium">{{ order.cartItems.length || 0 }}</span>
      </div>

      <!-- Totals -->
      <div class="mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm">
        <div class="flex justify-between sm:block">
          <span class="text-gray-600 sm:block">Tax</span>
          <span class="font-medium">
            {{ order.taxPrice | currency : "EGP" : "symbol" : "1.0-0" }}
          </span>
        </div>
        <div class="flex justify-between sm:block">
          <span class="text-gray-600 sm:block">Shipping</span>
          <span class="font-medium">
            {{ order.shippingPrice | currency : "EGP" : "symbol" : "1.0-0" }}
          </span>
        </div>
        <div class="flex justify-between sm:block text-base">
          <span class="font-semibold sm:block">Total</span>
          <span class="font-semibold">
            {{ order.totalOrderPrice | currency : "EGP" : "symbol" : "1.0-0" }}
          </span>
        </div>
      </div>

      <!-- Optional: shipping address -->
      @if (order.shippingAddress ) {
      <div class="mt-3 text-sm text-gray-600">
        <div class="font-medium">Ship to</div>
        <div>{{ order.shippingAddress.details }}</div>
        <div>{{ order.shippingAddress.city }}</div>
        <div>Phone: {{ order.shippingAddress.phone }}</div>
      </div>
      }
    </article>
    } @empty {
    <p class="text-gray-500">No orders found.</p>
    }
  </div>
</section>
